"use strict";(self["webpackChunkwebview"]=self["webpackChunkwebview"]||[]).push([[40],{87040:function(t,a,s){s.r(a),s.d(a,{default:function(){return v}});var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"cart"},[a("div",{staticClass:"head"},[a("van-nav-bar",{attrs:{title:"商品确认","left-text":"返回","left-arrow":""},on:{"click-left":function(a){return t.$router.replace("/")}}})],1),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("img",{staticClass:"img",attrs:{src:t.detail.images[0],alt:""}}),a("div",{staticClass:"info"},[a("h4",{staticClass:"name"},[t._v(t._s(t.detail.name))]),a("div",{staticClass:"item-bottom"},[a("div",{staticClass:"price"},[a("span",{staticClass:"unit"},[t._v("￥")]),a("span",{staticClass:"value"},[t._v(t._s(t.detail.price))])]),a("div",{staticClass:"amount"},[a("span",{staticClass:"reduce",on:{click:function(a){return t.changeAmount("reduce")}}},[t._v("-")]),a("span",{staticClass:"num"},[t._v(t._s(t.detail.amount))]),a("span",{staticClass:"add",on:{click:function(a){return t.changeAmount("add")}}},[t._v("+")])])])])])]),a("div",{staticClass:"bottom-box"},[a("div",{staticClass:"bottom"},[a("div",{staticClass:"total"},[a("span",{staticClass:"amount"},[t._v("共"),a("span",{staticClass:"value"},[t._v(t._s(t.detail.amount))]),t._v("件商品")]),a("span",{staticClass:"price"},[t._v("合计："),a("span",{staticClass:"unit"},[t._v("￥")]),a("span",{staticClass:"value"},[t._v(t._s(t.totalPrice))])])]),a("div",{staticClass:"pay",on:{click:t.showPayWay}},[t._v("结算")]),a("van-popup",{attrs:{round:"",position:"bottom","get-container":"body"},model:{value:t.showWay,callback:function(a){t.showWay=a},expression:"showWay"}},[a("div",{staticClass:"pay-way"},[a("div",{staticClass:"title"},[t._v("请选择支付方式")]),a("div",{staticClass:"way"},[a("div",{staticClass:"item",on:{click:function(a){return t.pay("ks")}}},[a("img",{staticClass:"icon",attrs:{src:s(24107),alt:""}}),a("span",[t._v("快币支付")]),a("span",{staticClass:"discount"},[t._v("(9.5折)")])]),a("div",{staticClass:"item",on:{click:function(a){return t.pay("wx")}}},[a("img",{staticClass:"icon",attrs:{src:s(45478),alt:""}}),a("span",[t._v("微信支付")])]),a("div",{staticClass:"item",on:{click:function(a){return t.pay("ali")}}},[a("img",{staticClass:"icon",attrs:{src:s(40473),alt:""}}),a("span",[t._v("支付宝支付")])])])])])],1)])])},e=[],n=s(15527),l=s(70643),c=s(22648),o={name:"VueCart",computed:{totalPrice(){return(this.detail.amount*this.detail.price).toFixed(2)}},data(){return{env:"",showWay:!1,detail:{}}},mounted(){this.getDetail(),this.env=(0,c.h)()},methods:{changeAmount(t){"add"==t&&this.detail.amount++,"reduce"==t&&this.detail.amount>1&&this.detail.amount--},getDetail(){const t=(0,n.N)(this.$route.query.id);this.detail={amount:1,...t}},showPayWay(){this.$dialog.confirm({message:"为庆祝桔色商城入驻快手3周年，桔色联合快手支付推出9.5折优惠活动，快手邀请您体验快币支付",showCancelButton:!1}),this.showWay=!0},tip(t){this.$dialog.alert({message:`请用${"wx"==t?"微信":"支付宝"}扫码进入商城选购`})},async pay(t){if("wx"!=this.env&&"wx"==t)this.tip(t);else if("ali"!=this.env&&"ali"==t)this.tip(t);else{this.showWay=!1;const a=this.$toast.loading({message:"正在支付",forbidClick:!0,duration:0}),s="ks"==t?parseInt(.95*this.totalPrice):parseInt(this.totalPrice),i=await(0,l.k)(s);a.clear(),i?window.location.href=i:this.$toast.loading({message:"支付失败，请重试",forbidClick:!0})}}}},r=o,d=s(43736),u=(0,d.Z)(r,i,e,!1,null,"2a688580",null),v=u.exports}}]);